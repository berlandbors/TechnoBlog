Технический обзор приложения "WiFi Диагностика"

Привет! Я, Андрей Берлин (Berlandbor), хочу рассказать о структуре и технических особенностях моего веб-приложения **WiFi Диагностика**. Приложение предназначено для оперативной диагностики состояния Wi-Fi соединения с помощью веб-браузера. В этом обзоре я опишу основные возможности, реализацию и архитектурные решения.

---

## Основные возможности

- **Проверка скорости интернет-соединения** (Download speed, RTT)
- **Визуализация истории тестов** через график (Chart.js)
- **Вывод сетевой информации через Network Information API** (тип сети, задержка, экономия трафика и т.д.)
- **Сбор и отображение данных WebRTC** (ICE-кандидаты для локального IP и типа соединения)
- **Информация об устройстве и браузере**
- **Поддержка красивого интерфейса с модальными окнами и адаптивной сеткой**

---

## Архитектурные решения

### 1. **Frontend-only приложение**

Приложение полностью работает на стороне клиента. Нет серверной части или backend-API. Все вычисления и сбор данных осуществляются средствами браузера. Это уменьшает задержку, упрощает распространение и обеспечивает приватность пользователя.

### 2. **HTML, CSS, JavaScript**

Код полностью "vanilla", без тяжёлых фреймворков. Это резко ускоряет загрузку (внешних зависимостей кроме Chart.js нет) и упрощает отладку.

### 3. **Использование браузерных Web API**

- **Network Information API:** позволяет отобразить скорость, RTT и тип сети, если поддерживается браузером.
- **navigator.onLine & события online/offline:** позволяют получать актуальный статус подключения в реальном времени.
- **WebRTC:** используется для извлечения локальных IP и ICE-кандидатов — это экспертная техника, позволяющая узнать детали NAT и сетевого окружения.
- **performance.now:** используется для измерения времени скачивания файла с точностью до миллисекунд (скоростные тесты).

### 4. **Speed test через скачивание статического файла**

Для измерения пропускной способности скачивается небольшой PNG (~50 КБ) с CDN, засчитывается точная длительность — по этой дельте рассчитывается скорость в Mbps. RTT берётся либо из connection.rtt, либо пытается измеряться через быструю загрузку небольшого файла (если Network Information API недоступен).

### 5. **Chart.js для визуализации**

История тестов наглядно выводится на линиях: скорость и RTT отображаются разными цветами и шкалами. Поддержана адаптивность, обработка анимаций и автоматическая подгонка подписей.

### 6. **Продвинутая работа с UI**

- Единая стилизованная панель и модальные окна.
- Кроссбраузерный дизайн (гибкая адаптация под разные размеры экрана, отзывчивость).
- Запуск теста через кнопку, а также автоматический повторный тест через интервал.
- Статусы и подсказки, предупреждения при низком качестве соединения (например, если RTT>500ms либо очень низкая скорость).

---

## Особенности реализации и нюансы

- **Мониторинг сети** — каждый полсекунды проверяется актуальное состояние online/offline и параметр�� сети.
- **Автотест** — раз в 1 секунду тест скорости запускается автоматически, если не идёт ручной тест (при необходимости можно увеличить интервал для нагрузочных сценариев).
- **WebRTC-кандидаты** выдаются с пояснениями типа и IP-адреса (работа ограничена политикой браузеров).
- **Публичный и локальный IP** показываются раздельно, внешний IP берётся с публичного сервисного API.
- **Интерфейс локализован на русский язык.**
- **Не используются сторонние аналитики и трекинг-скрипты — всё максимально прозрачно.**

---

## Возможные улучшения

- **Увеличить надёжность и точность спидтеста**: использовать другие методы (например, WebSockets или несколько файлов разных размеров).
- **Показать разницу между Wi-Fi и мобильными сетями** через более продвинутый анализ Network Information API.
- **Добавить сохранение истории тестов** в LocalStorage/IndexedDB.
- **Реализовать экспорт отчётов** (например, PDF, CSV).
- **Перевести интерфейс на английский/другие языки.**

---

## Итог

Приложение демонстрирует возможности современных браузеров: позволяет быстро проверить качество интернет-соединения и собрать технические детали в пару кликов. Такие инструменты полезны для диагностики проблем пользователей, экспериментов с Wi-Fi или просто для проверки, насколько хорошо работает ваша сеть в данный момент.

---

*С уважением,  
Андрей Берлин (@Berlandbor)*

---